{% extends 'base.html.twig' %}

{% block title %}Pitchee - Inspos{% endblock %}

{% block body %}
    <div class="container">
        <div class="header">
            <div class="profile-picture">
                {% if app.user.getImageFilename() != null %}
                    <img src="{{ asset('uploads/' ~ app.user.getImageFilename()) }}" alt="profile-picture">
                {% else %}
                    <img src="{{ asset('images/user/default-user-image.png') }}" alt="profile-picture">
                {% endif %}
            </div>
            <div class="header-title">
                <div class="title-sm">Hey {{ app.user.getFirstName() }},</div>
                <div class="title-lg">Quoi de neuf ?</div>
            </div>
        </div>
        <div class="block card">
            <div class="block-title">
                <h1>Inspiration</h1>
            </div>
            <div class="block-content">
                Loremp lituej qmeuri sjzueyt.
                <div class="block-image">
                    <img src="https://www.indaklub.com/wp-content/uploads/2020/03/laylow-trinity-1-1920x1080.png" alt="idea">
                </div>
            </div>
            <div class="block-options">
                <button class="block-button dismiss">Pas intéressant</button>
                <button class="block-button like">J'aime !<i class="far fa-heart"></i></button>
            </div>
        </div>

        <div class="block card-next">
            <div class="block-title">
                <h1>Inspiration</h1>
            </div>
            <div class="block-content">
                Loremp lituej qmeuri sjzueyt.
                <div class="block-image">
                    <img src="https://www.indaklub.com/wp-content/uploads/2020/03/laylow-trinity-1-1920x1080.png" alt="idea">
                </div>
            </div>
            <div class="block-options">
                <button class="block-button dismiss">Pas intéressant</button>
                <button class="block-button like">J'aime !<i class="far fa-heart"></i></button>
            </div>
        </div>
    </div>
    <script>
        template = `
        <div class="block card-next">
            <div class="block-title">
                <h1>###title</h1>
            </div>
            <div class="block-content">
                ###content
                <div class="block-###type">
                    ###media
                </div>
            </div>
            <div class="block-options">
                <button class="block-button dismiss">Pas intéressant</button>
                <button class="block-button like">J'aime !<i class="far fa-heart"></i></button>
            </div>
        </div>
        `;
        i = 0;
        $(document).on('click', '.like', function(){
            $.ajax({
                type: "GET",
                url: "/card/next",
                success: function (response) {
                    i = i + 1
                    console.log(response);
                    console.log(JSON.parse(response));
                    res = JSON.parse(response);
                    newCard = template
                    newCard = newCard.replace('###title', res.title + i)

                    nextCard = $('.card-next');
                    $('.card').fadeOut(500).remove();
                    nextCard.addClass('card');
                    nextCard.removeClass('card-next');
                    $('.container').append(newCard);
                }
            });
        })
    </script>
{% endblock %}
